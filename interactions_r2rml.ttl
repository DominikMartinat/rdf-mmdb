@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>.
@prefix sio: <http://semanticscience.org/resource/>.
@prefix mmdbint: <http://rdf.molmedb.upol.cz/interaction/>.
@prefix mmdbsub: <http://rdf.molmedb.upol.cz/substance/>.
@prefix mmdbref: <http://rdf.molmedb.upol.cz/reference/>.
@prefix obo: <http://purl.obolibrary.org/obo/>.
@prefix cito: <http://purl.org/spar/cito/>.
@prefix bao: <http://www.bioassayontology.org/bao#>.
@prefix xsd: <http://www.w3.org/2001/XMLSchema#>.
@prefix edam: <http://edamontology.org/>.
@prefix repr: <https://w3id.org/reproduceme#>.
@prefix dc: <http://purl.org/dc/elements/1.1/>.
@prefix dcterms: <http://purl.org/dc/terms/>.
@prefix rr: <http://www.w3.org/ns/r2rml#>.
@prefix temp: <http://rdf.molmedb.upol.cz/vocabulary#>. #IRIS yet missing


<#TriplesMap1>
  rr:logicalTable [ rr:sqlQuerry """
    SELECT *,
      (CASE WHEN LENGTH(id_substance)<5 THEN LPAD(id_substance,5,0) ELSE id_substance END) padded_id_substance FROM interaction
  """];
  rr:subjectMap [
    rr:template "http://rdf.molmedb.upol.cz/interaction/{id}";
    rr:class bao:BAO_0000015;
  ];
    rr:predicateObjectMap [
    rr:predicate bao:BAO_0090012;
    rr:objectMap [ rr:template "http://identifiers.org/molmedb/MM{padded_id_substance}" ]
  ];
    rr:predicateObjectMap [
    rr:predicate bao:BAO_0090012;
    rr:objectMap [ rr:template "http://rdf.molmedb.upol.cz/interaction/membrane_{id_membrane}"  ]
  ];
    rr:predicateObjectMap [
    rr:predicate bao:BAO_0000209;
    rr:objectMap [ rr:template "http://rdf.molmedb.upol.cz/interaction/measure_group_{id}"  ]
  ];
# probably not needed
#    rr:predicateObjectMap [
#    rr:predicate bao:BAO_0000205;
#    rr:objectMap [ rr:constant bao:BAO_0000100 ]
#  ];
    rr:predicateObjectMap [
    rr:predicate cito:citesAsDataSource;
    rr:objectMap [ rr:template "http://rdf.molmedb.upol.cz/reference/{id_reference}"  ]
  ].

<#TriplesMap2>
  rr:logicalTable [ rr:sqlQuerry """
    SELECT *,
      (CASE WHEN LENGTH(id_substance)<5 THEN LPAD(id_substance,5,0) ELSE id_substance END) padded_id_substance,
      (CASE WHEN LogK IS NULL THEN NULL ELSE id END) LogK_id,
      (CASE WHEN LogPerm IS NULL THEN NULL ELSE id END) LogPerm_id,
      (CASE WHEN temperature IS NULL THEN NULL ELSE id END) temperature_id,
      (CASE WHEN charge IS NULL THEN NULL ELSE id END) charge_id FROM interaction

  """];
  rr:subjectMap [
    rr:template "http://rdf.molmedb.upol.cz/interaction/measure_group_{id}";
    rr:class bao:BAO_0000040;
  ];
    rr:predicateObjectMap [
    rr:predicate bao:BAO_0000212;
    rr:objectMap [ rr:template "http://rdf.molmedb.upol.cz/interaction/method_{id_method}" ]
  ];  
    rr:predicateObjectMap [
    rr:predicate bao:BAO_0000208;
    rr:objectMap [ rr:template "http://rdf.molmedb.upol.cz/interaction/endpoint_logk_{LogK_id}" ]
  ]; 
    rr:predicateObjectMap [
    rr:predicate bao:BAO_0000208;
    rr:objectMap [ rr:template "http://rdf.molmedb.upol.cz/interaction/endpoint_logperm_{LogPerm_id}" ]
  ]; 
    rr:predicateObjectMap [
    rr:predicate bao:BAO_0090012;
    rr:objectMap [ rr:template "http://identifiers.org/molmedb/MM{padded_id_substance}" ]
  ];
    rr:predicateObjectMap [
    rr:predicate bao:BAO_0090012;
    rr:objectMap [ rr:template "http://rdf.molmedb.upol.cz/interaction/membrane_{id_membrane}"  ]
  ];
    rr:predicateObjectMap [
    rr:predicate bao:BAO_0000426;
    rr:objectMap [ rr:template "http://rdf.molmedb.upol.cz/interaction/{id}" ]
  ]; 
    rr:predicateObjectMap [
    rr:predicate repr:hasExperimentalCondition;
    rr:objectMap [ rr:template "http://rdf.molmedb.upol.cz/interaction/measure_group_temperature_{temperature_id}" ]
  ]; 
    rr:predicateObjectMap [
    rr:predicate repr:hasExperimentalCondition;
    rr:objectMap [ rr:template "http://rdf.molmedb.upol.cz/interaction/measure_group_mol_charge_{charge_id}" ]
  ]; 
    rr:predicateObjectMap [
    rr:predicate rdfs:comment;
    rr:objectMap [ rr:column "comment" ]
  ].

<#TriplesMap3>
  rr:logicalTable [ rr:tableName "membranes" ];
  rr:subjectMap [
    rr:template "http://rdf.molmedb.upol.cz/interaction/membrane_{id}";
    rr:class temp:membrane_model;
  ];
    rr:predicateObjectMap [
    rr:predicate rdfs:label;
    rr:objectMap [ rr:column "name" ]
  ];
    rr:predicateObjectMap [
    rr:predicate dc:description;
    rr:objectMap [ rr:column "description"; rr:datatype rdf:HTML ]
  ];
    rr:predicateObjectMap [
    rr:predicate dcterms:bibliographicCitation;
    rr:objectMap [ rr:column "references" ]
  ].
# has role target - might or might not be needed
#    rr:predicateObjectMap [
#    rr:predicate bao:BAO_0003102;
#    rr:objectMap [ rr:constant bao:BAO_0003064 ]
#  ].

<#TriplesMap4>
  rr:logicalTable [ rr:tableName "methods" ];
  rr:subjectMap [
    rr:template "http://rdf.molmedb.upol.cz/interaction/method_{id}";
    rr:class bao:BAO_0002753;
  ];
    rr:predicateObjectMap [
    rr:predicate rdfs:label;
    rr:objectMap [ rr:column "name" ]
  ];
    rr:predicateObjectMap [
    rr:predicate dc:description;
    rr:objectMap [ rr:column "description"; rr:datatype rdf:HTML ]
  ];
    rr:predicateObjectMap [
    rr:predicate dcterms:bibliographicCitation;
    rr:objectMap [ rr:column "references" ]
  ].

<#TriplesMap5>
  rr:logicalTable [ rr:sqlQuerry "SELECT * FROM interaction WHERE temperature IS NOT NULL" ];
  rr:subjectMap [
    rr:template "http://rdf.molmedb.upol.cz/interaction/measure_group_temperature_{id}";
    rr:class obo:PATO_0000146;
  ];
    rr:predicateObjectMap [
    rr:predicate sio:SIO_000300;
    rr:objectMap [ rr:column "temperature" ]
  ];
    rr:predicateObjectMap [
    rr:predicate sio:SIO_000221;
    rr:objectMap [ rr:constant obo:UO_0000027 ]
  ].

<#TriplesMap6>
  rr:logicalTable [ rr:sqlQuerry "SELECT * FROM interaction WHERE charge IS NOT NULL" ];
  rr:subjectMap [
    rr:template "http://rdf.molmedb.upol.cz/interaction/measure_group_mol_charge_{id}";
    rr:class edam:data_0845;
  ];
    rr:predicateObjectMap [
    rr:predicate sio:SIO_000300;
    rr:objectMap [ rr:column "charge" ]
  ].

<#TriplesMap7>
  rr:logicalTable [ rr:sqlQuerry "SELECT * FROM interaction WHERE LogK IS NOT NULL" ];
  rr:subjectMap [
    rr:template "http://rdf.molmedb.upol.cz/interaction/endpoint_logk_{id}";
    rr:class temp:logk;
  ];
    rr:predicateObjectMap [
    rr:predicate bao:BAO_0095007;
    rr:objectMap [ rr:column "LogK" ]
  ];
    rr:predicateObjectMap [
    rr:predicate sio:SIO_000221;
    rr:objectMap [ rr:constant obo:NCIT_C70455 ]
  ];
    rr:predicateObjectMap [
    rr:predicate bao:BAO_0000559;
    rr:objectMap [ rr:template "http://rdf.molmedb.upol.cz/interaction/measure_group_{id}" ]
  ].

<TriplesMap8>
  rr:logicalTable [ rr:sqlQuerry "SELECT * FROM interaction WHERE LogPerm IS NOT NULL" ];
  rr:subjectMap [
    rr:template "http://rdf.molmedb.upol.cz/interaction/endpoint_logperm_{id}";
    rr:class bao:BAO_0002808;
  ];
    rr:predicateObjectMap [
    rr:predicate bao:BAO_0095007;
    rr:objectMap [ rr:column "LogPerm" ]
  ];
    rr:predicateObjectMap [
    rr:predicate bao:BAO_0002858;
    rr:objectMap [ rr:constant bao:BAO_0002172 ]
  ];
    rr:predicateObjectMap [
    rr:predicate sio:SIO_000221;
    rr:objectMap [ rr:constant obo:NCIT_C102406 ]
  ];
    rr:predicateObjectMap [
    rr:predicate bao:BAO_0000559;
    rr:objectMap [ rr:template "http://rdf.molmedb.upol.cz/interaction/measure_group_{id}" ]
  ].

